{"ast":null,"code":"import _regeneratorRuntime from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import reactRouterDom from'react-router-dom';import{useHistory}from'react-router-dom';var REACT_APP_SERVER_URL=process.env.REACT_APP_SERVER_URL;var initialState={name:'',email:'',password:''};var Register=function Register(props){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var history=useHistory();var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setState(function(curState){return _objectSpread(_objectSpread({},curState),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt){var name,email,password,user,res,message,parsedUser,token,_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();name=state.name,email=state.email,password=state.password;user={name:name,email:email,password:password};//ES6 syntax\nconsole.log('USER FROM INPUT FORM IS..',user);// const res = await axios.post(`${REACT_APP_SERVER_URL}/register`, user);\n_context.next=6;return fetch(\"\".concat(REACT_APP_SERVER_URL,\"/register\"),{method:'POST',// credentials: 'include',\nmode:'cors',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)});case 6:res=_context.sent;setState(initialState);if(res.ok){_context.next=15;break;}_context.next=11;return res.text();case 11:message=_context.sent;alert(message);_context.next=23;break;case 15:_context.next=17;return res.json();case 17:parsedUser=_context.sent;token=parsedUser.token,_id=parsedUser._id;localStorage.setItem('accessToken',token);localStorage.setItem('userId',_id);props.handleAuth(true);//set isAuthenticated to true using handleAuth function passed down from App component\nhistory.push('/');case 23:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"I do not have an account\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sign up with your email and password\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSubmit,style:{display:'flex',flexDirection:'column',width:'30vw',margin:'0 auto',marginTop:'8vw',justifyContent:'space-around',height:'35vw',border:'1px solid grey',borderRadius:'1rem',padding:'3rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"firstname lastname\",value:state.name,onChange:handleChange,style:{width:'100%',letterSpacing:'.2rem',height:'2rem',border:'none',borderBottom:'1px solid grey'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"email\",value:state.email,onChange:handleChange,style:{width:'100%',letterSpacing:'.2rem',height:'2rem',border:'none',borderBottom:'1px solid grey'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",placeholder:\"password\",value:state.password,onChange:handleChange,style:{width:'100%',letterSpacing:'.3rem',height:'2rem',border:'none',borderBottom:'1px solid grey'}})]}),/*#__PURE__*/_jsx(\"button\",{children:\"SIGN ME UP\"})]})]});};export default Register;","map":{"version":3,"sources":["/Users/joohoonkim/Documents/CW/auxion/client/src/components/register.component.jsx"],"names":["React","useState","reactRouterDom","useHistory","REACT_APP_SERVER_URL","process","env","initialState","name","email","password","Register","props","state","setState","history","handleChange","evt","target","value","curState","handleSubmit","preventDefault","user","console","log","fetch","method","mode","headers","body","JSON","stringify","res","ok","text","message","alert","json","parsedUser","token","_id","localStorage","setItem","handleAuth","push","display","flexDirection","width","margin","marginTop","justifyContent","height","border","borderRadius","padding","letterSpacing","borderBottom"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport reactRouterDom from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\n\nconst REACT_APP_SERVER_URL = process.env.REACT_APP_SERVER_URL;\n\nconst initialState = {\n  name: '',\n  email: '',\n  password: '',\n};\n\nconst Register = (props) => {\n  const [state, setState] = useState(initialState);\n  const history = useHistory();\n\n  const handleChange = (evt) => {\n    const { name, value } = evt.target;\n    setState((curState) => ({ ...curState, [name]: value }));\n  };\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const { name, email, password } = state;\n    const user = { name, email, password }; //ES6 syntax\n    console.log('USER FROM INPUT FORM IS..', user);\n\n    // const res = await axios.post(`${REACT_APP_SERVER_URL}/register`, user);\n    const res = await fetch(`${REACT_APP_SERVER_URL}/register`, {\n      method: 'POST',\n      // credentials: 'include',\n      mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(user),\n    });\n\n    setState(initialState);\n    if (!res.ok) {\n      const message = await res.text();\n      alert(message);\n    } else {\n      const parsedUser = await res.json();\n      const { token, _id } = parsedUser;\n      localStorage.setItem('accessToken', token);\n      localStorage.setItem('userId', _id);\n      props.handleAuth(true); //set isAuthenticated to true using handleAuth function passed down from App component\n      history.push('/');\n    }\n  };\n\n  return (\n    <div className=\"register\">\n      <h2>I do not have an account</h2>\n      <span>Sign up with your email and password</span>\n      <form\n        className=\"form\"\n        onSubmit={handleSubmit}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          width: '30vw',\n          margin: '0 auto',\n          marginTop: '8vw',\n          justifyContent: 'space-around',\n          height: '35vw',\n          border: '1px solid grey',\n          borderRadius: '1rem',\n          padding: '3rem',\n        }}\n      >\n        <div className=\"field\">\n          <label>Name</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"firstname lastname\"\n            value={state.name}\n            onChange={handleChange}\n            style={{\n              width: '100%',\n              letterSpacing: '.2rem',\n              height: '2rem',\n              border: 'none',\n              borderBottom: '1px solid grey',\n            }}\n          />\n        </div>\n        <div className=\"field\">\n          <label>Email</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"email\"\n            value={state.email}\n            onChange={handleChange}\n            style={{\n              width: '100%',\n              letterSpacing: '.2rem',\n              height: '2rem',\n              border: 'none',\n              borderBottom: '1px solid grey',\n            }}\n          />\n        </div>\n        <div className=\"field\">\n          <label>Password</label>\n          <input\n            type=\"text\"\n            name=\"password\"\n            placeholder=\"password\"\n            value={state.password}\n            onChange={handleChange}\n            style={{\n              width: '100%',\n              letterSpacing: '.3rem',\n              height: '2rem',\n              border: 'none',\n              borderBottom: '1px solid grey',\n            }}\n          />\n        </div>\n        <button>SIGN ME UP</button>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}