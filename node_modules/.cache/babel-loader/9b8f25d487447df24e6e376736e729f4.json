{"ast":null,"code":"import _regeneratorRuntime from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/joohoonkim/Documents/CW/auxion/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import axios from'axios';var REACT_APP_SERVER_URL=process.env.REACT_APP_SERVER_URL;var initialAddress={street:'',city:'',state:'',zip:''};var ListProperty=function ListProperty(props){var _useState=useState(initialAddress),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState('0'),_useState6=_slicedToArray(_useState5,2),startPrice=_useState6[0],setStartPrice=_useState6[1];var _useState7=useState(new Date().toJSON().slice(0,10)),_useState8=_slicedToArray(_useState7,2),auctionEndTime=_useState8[0],setAuctionEndTime=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),files=_useState10[0],setFiles=_useState10[1];var history=props.history;var handleAddressChange=function handleAddressChange(evt){setAddress(_objectSpread(_objectSpread({},address),{},_defineProperty({},evt.target.name,evt.target.value)));};var handleDescriptionChange=function handleDescriptionChange(evt){setDescription(evt.target.value);};var handleStartPriceChange=function handleStartPriceChange(evt){setStartPrice(evt.target.value);};var handleAuctionEndTimeChange=function handleAuctionEndTimeChange(evt){setAuctionEndTime(evt.target.value);};var handlePhotoSelect=function handlePhotoSelect(evt){setFiles(Array.from(evt.target.files));// console.log('EVT.TGT.FILES: ', evt.target.files);\n// setFilename(evt.target.files[0].name);\n};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt){var formData,response,_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();formData=new FormData();formData.append('address',JSON.stringify(address));formData.append('description',JSON.stringify(description));formData.append('startPrice',JSON.stringify(startPrice));formData.append('auctionEndTime',JSON.stringify(auctionEndTime));files.forEach(function(file){return formData.append('file[]',file,file.name);});//https://developer.mozilla.org/en-US/docs/Web/API/FormData/append\n//sticking '[]' at the end for the browser to understand that it is an array (look at the examples part for the above doc. PHP convention but formData standard comes from PHP anyways. It's just like JSON is a convention of JS but used by other languages. Same thing)\nconsole.log(_toConsumableArray(formData.entries()));_context.prev=8;_context.next=11;return axios.post(\"\".concat(REACT_APP_SERVER_URL,\"/listproperty\"),formData,{headers:{'Content-Type':'multipart/form-data',Authorization:localStorage.getItem('accessToken')}});case 11:response=_context.sent;console.log('RESPONSE FOR LISTPROPERTY: ',response);_id=response.data._id;console.log('_ID HERE: ',_id);// console.log('HISTORY HERE: ', history);\nhistory.push(\"properties/\".concat(_id));_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](8);console.log(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[8,18]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/ (// <div>\n//   <h2>Property Listing Form</h2>\n//   <span>Provide property address and Photo</span>\n_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"street\",children:\"Street\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address.street,onChange:handleAddressChange,name:\"street\",id:\"street\",placeholder:\"Enter street\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"city\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address.city,onChange:handleAddressChange,name:\"city\",us:\"city\",placeholder:\"Enter city\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"state\",children:\"State\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address.state,onChange:handleAddressChange,name:\"state\",id:\"state\",placeholder:\"Enter state\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"zip\",children:\"Zip\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address.zip,onChange:handleAddressChange,name:\"zip\",id:\"zip\",placeholder:\"Enter zip\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description \"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:handleDescriptionChange,name:\"description\",id:\"description\",placeholder:\"Enter description\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startPrice\",children:\"Start Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:startPrice,onChange:handleStartPriceChange,name:\"startPrice\",id:\"startPrice\",placeholder:\"Enter start price for the auction\",min:\"0\"//validation added to prevent inputting negative number\n,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auctionEndTime\",children:\"Auction End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:auctionEndTime,onChange:handleAuctionEndTimeChange,name:\"auctionEndTime\",id:\"auctionEndTime\",min:new Date().toJSON().slice(0,10),required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handlePhotoSelect,accept:\"image/*\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{children:\"List My Property!\"})]})// </div>\n);};export default ListProperty;","map":{"version":3,"sources":["/Users/joohoonkim/Documents/CW/auxion/client/src/components/listProperty.component.jsx"],"names":["React","useState","axios","REACT_APP_SERVER_URL","process","env","initialAddress","street","city","state","zip","ListProperty","props","address","setAddress","description","setDescription","startPrice","setStartPrice","Date","toJSON","slice","auctionEndTime","setAuctionEndTime","files","setFiles","history","handleAddressChange","evt","target","name","value","handleDescriptionChange","handleStartPriceChange","handleAuctionEndTimeChange","handlePhotoSelect","Array","from","handleSubmit","preventDefault","formData","FormData","append","JSON","stringify","forEach","file","console","log","entries","post","headers","Authorization","localStorage","getItem","response","_id","data","push"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst { REACT_APP_SERVER_URL } = process.env;\n\nconst initialAddress = {\n  street: '',\n  city: '',\n  state: '',\n  zip: '',\n};\nconst ListProperty = (props) => {\n  const [address, setAddress] = useState(initialAddress);\n  const [description, setDescription] = useState('');\n  const [startPrice, setStartPrice] = useState('0');\n  const [auctionEndTime, setAuctionEndTime] = useState(\n    new Date().toJSON().slice(0, 10)\n  );\n  const [files, setFiles] = useState([]);\n\n  const { history } = props;\n\n  const handleAddressChange = (evt) => {\n    setAddress({ ...address, [evt.target.name]: evt.target.value });\n  };\n  const handleDescriptionChange = (evt) => {\n    setDescription(evt.target.value);\n  };\n  const handleStartPriceChange = (evt) => {\n    setStartPrice(evt.target.value);\n  };\n  const handleAuctionEndTimeChange = (evt) => {\n    setAuctionEndTime(evt.target.value);\n  };\n\n  const handlePhotoSelect = (evt) => {\n    setFiles(Array.from(evt.target.files));\n    // console.log('EVT.TGT.FILES: ', evt.target.files);\n    // setFilename(evt.target.files[0].name);\n  };\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const formData = new FormData();\n    formData.append('address', JSON.stringify(address));\n    formData.append('description', JSON.stringify(description));\n    formData.append('startPrice', JSON.stringify(startPrice));\n    formData.append('auctionEndTime', JSON.stringify(auctionEndTime));\n\n    files.forEach((file) => formData.append('file[]', file, file.name));\n    //https://developer.mozilla.org/en-US/docs/Web/API/FormData/append\n    //sticking '[]' at the end for the browser to understand that it is an array (look at the examples part for the above doc. PHP convention but formData standard comes from PHP anyways. It's just like JSON is a convention of JS but used by other languages. Same thing)\n    console.log([...formData.entries()]);\n    try {\n      const response = await axios.post(\n        `${REACT_APP_SERVER_URL}/listproperty`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            Authorization: localStorage.getItem('accessToken'),\n          },\n        }\n      );\n      console.log('RESPONSE FOR LISTPROPERTY: ', response);\n      const { _id } = response.data;\n\n      console.log('_ID HERE: ', _id);\n      // console.log('HISTORY HERE: ', history);\n      history.push(`properties/${_id}`);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    // <div>\n    //   <h2>Property Listing Form</h2>\n    //   <span>Provide property address and Photo</span>\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"street\">Street</label>\n        <input\n          type=\"text\"\n          value={address.street}\n          onChange={handleAddressChange}\n          name=\"street\"\n          id=\"street\"\n          placeholder=\"Enter street\"\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"city\">City</label>\n        <input\n          type=\"text\"\n          value={address.city}\n          onChange={handleAddressChange}\n          name=\"city\"\n          us=\"city\"\n          placeholder=\"Enter city\"\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"state\">State</label>\n        <input\n          type=\"text\"\n          value={address.state}\n          onChange={handleAddressChange}\n          name=\"state\"\n          id=\"state\"\n          placeholder=\"Enter state\"\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"zip\">Zip</label>\n        <input\n          type=\"text\"\n          value={address.zip}\n          onChange={handleAddressChange}\n          name=\"zip\"\n          id=\"zip\"\n          placeholder=\"Enter zip\"\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"description\">Description </label>\n        <textarea\n          value={description}\n          onChange={handleDescriptionChange}\n          name=\"description\"\n          id=\"description\"\n          placeholder=\"Enter description\"\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"startPrice\">Start Price</label>\n        <input\n          type=\"number\"\n          value={startPrice}\n          onChange={handleStartPriceChange}\n          name=\"startPrice\"\n          id=\"startPrice\"\n          placeholder=\"Enter start price for the auction\"\n          min=\"0\" //validation added to prevent inputting negative number\n          required\n        />\n      </div>\n      <div>\n        <label htmlFor=\"auctionEndTime\">Auction End Time</label>\n        <input\n          type=\"date\"\n          value={auctionEndTime}\n          onChange={handleAuctionEndTimeChange}\n          name=\"auctionEndTime\"\n          id=\"auctionEndTime\"\n          min={new Date().toJSON().slice(0, 10)}\n          required\n        />\n      </div>\n      <br />\n      <input\n        type=\"file\"\n        multiple={true}\n        onChange={handlePhotoSelect}\n        accept=\"image/*\"\n      />\n      {/*To enable multiple file uplaod, set multiple attribute to true(Don't do quotes. Wrap true in curly braces) */}\n      {/* <input type=\"submit\" value=\"click\"></input> */}\n      <br />\n      <button>List My Property!</button>\n    </form>\n    // </div>\n  );\n};\n\nexport default ListProperty;\n"]},"metadata":{},"sourceType":"module"}