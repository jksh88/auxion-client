{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/joohoonkim/Documents/CW/auxion/client/src/components/auctionPage.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Modal from 'react-modal';\nimport PropertyPictures from './propertyPictures.component';\nimport OwnerAuctionInterface from './ownerAuctionInterface.component';\nimport BuyerAuctionInterface from './buyerAuctionInterface.component';\nimport { io } from 'socket.io-client';\nimport './auctionPage.styles.css';\nconst {\n  REACT_APP_SERVER_URL\n} = process.env;\n\nconst AuctionPage = props => {\n  _s();\n\n  const {\n    id\n  } = props.match.params;\n  const [property, setProperty] = useState(null);\n  const [isOwner, setIsOwner] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  useEffect(() => {\n    const socket = io(process.env.REACT_APP_SERVER_URL, {\n      transports: ['websocket']\n    });\n    socket.on('bid', payload => {\n      const auction = JSON.parse(payload);\n\n      if (auction.propertyOnSale === id) {\n        setProperty({ ...property,\n          auction\n        });\n      }\n\n      console.log(payload);\n      console.log('Socket connection established');\n    }); //I don't need to import process.env above. React does it for me as long as I have it included in the .env file.\n    //It's good to have the socket.io client function in useEffect callback because we need to make sure the compoent has loaded first because client relies on broswer.\n\n    axios.get(`${REACT_APP_SERVER_URL}/properties/${id}`, {\n      headers: {\n        Authorization: localStorage.getItem('accessToken')\n      }\n    }).then(res => {\n      setProperty(res.data);\n      setIsOwner(localStorage.getItem('userId') === res.data.owner);\n      console.log('DATA: ', res.data);\n    }).catch(err => console.log(err));\n  }, [id]); //If I use some variable from outer scope(like 'id' here) in useEffect, that varialbe needs to go inside the array after the useEffect, because it's a presumption of React that I might have have forgottent it. It's because my state can be dependent on the value of that variable. This callback in useEffect will run everytime and only when the id changes.\n\n  const openModal = () => {\n    setIsOpen(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auction-page\",\n    children: property && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: `Auction page for address ${property.address.street}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"one-picture\",\n          onClick: openModal,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: property.images[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auction-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: property.auction.currentHighestBid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"by-user-type-interface\",\n            children: isOwner ? /*#__PURE__*/_jsxDEV(OwnerAuctionInterface, {\n              bids: property.auction.bids\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(BuyerAuctionInterface, {\n              bids: property.auction.bids\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isOpen,\n        contentLabel: \"Example Modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsOpen(false),\n          children: \"Close Modal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(PropertyPictures, {\n          pics: property.images\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuctionPage, \"IKUuzsGkoxbL3dTfLFn6Xx7EPxo=\");\n\n_c = AuctionPage;\nexport default AuctionPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuctionPage\");","map":{"version":3,"sources":["/Users/joohoonkim/Documents/CW/auxion/client/src/components/auctionPage.component.jsx"],"names":["React","useEffect","useState","axios","Modal","PropertyPictures","OwnerAuctionInterface","BuyerAuctionInterface","io","REACT_APP_SERVER_URL","process","env","AuctionPage","props","id","match","params","property","setProperty","isOwner","setIsOwner","isOpen","setIsOpen","socket","transports","on","payload","auction","JSON","parse","propertyOnSale","console","log","get","headers","Authorization","localStorage","getItem","then","res","data","owner","catch","err","openModal","address","street","images","currentHighestBid","bids"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Modal from 'react-modal';\nimport PropertyPictures from './propertyPictures.component';\nimport OwnerAuctionInterface from './ownerAuctionInterface.component';\nimport BuyerAuctionInterface from './buyerAuctionInterface.component';\nimport { io } from 'socket.io-client';\n\nimport './auctionPage.styles.css';\nconst { REACT_APP_SERVER_URL } = process.env;\n\nconst AuctionPage = (props) => {\n  const { id } = props.match.params;\n  const [property, setProperty] = useState(null);\n  const [isOwner, setIsOwner] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    const socket = io(process.env.REACT_APP_SERVER_URL, {\n      transports: ['websocket'],\n    });\n    socket.on('bid', (payload) => {\n      const auction = JSON.parse(payload);\n      if (auction.propertyOnSale === id) {\n        setProperty({\n          ...property,\n          auction,\n        });\n      }\n      console.log(payload);\n      console.log('Socket connection established');\n    });\n    //I don't need to import process.env above. React does it for me as long as I have it included in the .env file.\n\n    //It's good to have the socket.io client function in useEffect callback because we need to make sure the compoent has loaded first because client relies on broswer.\n\n    axios\n      .get(`${REACT_APP_SERVER_URL}/properties/${id}`, {\n        headers: {\n          Authorization: localStorage.getItem('accessToken'),\n        },\n      })\n      .then((res) => {\n        setProperty(res.data);\n        setIsOwner(localStorage.getItem('userId') === res.data.owner);\n        console.log('DATA: ', res.data);\n      })\n      .catch((err) => console.log(err));\n  }, [id]);\n  //If I use some variable from outer scope(like 'id' here) in useEffect, that varialbe needs to go inside the array after the useEffect, because it's a presumption of React that I might have have forgottent it. It's because my state can be dependent on the value of that variable. This callback in useEffect will run everytime and only when the id changes.\n\n  const openModal = () => {\n    setIsOpen(true);\n  };\n\n  return (\n    <div className=\"auction-page\">\n      {property && (\n        <>\n          <section>\n            <div>{`Auction page for address ${property.address.street}`}</div>\n          </section>\n          <section>\n            <div className=\"one-picture\" onClick={openModal}>\n              <img src={property.images[0]} />\n            </div>\n            <div className=\"auction-info\">\n              <div>\n                <h2>{property.auction.currentHighestBid}</h2>\n              </div>\n\n              <div className=\"by-user-type-interface\">\n                {isOwner ? (\n                  <OwnerAuctionInterface bids={property.auction.bids} />\n                ) : (\n                  <BuyerAuctionInterface bids={property.auction.bids} />\n                )}\n              </div>\n            </div>\n          </section>\n\n          <Modal isOpen={isOpen} contentLabel=\"Example Modal\">\n            <button onClick={() => setIsOpen(false)}>Close Modal</button>\n            <PropertyPictures pics={property.images} />\n          </Modal>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default AuctionPage;\n"]},"metadata":{},"sourceType":"module"}